---
title: The association between Facebook adoption and well-being
shorttitle: Facebook and well-being
leftheader: Facebook and well-being
author: 
  - name: Matti Vuorre
    affiliation: 1
    address: Oxford Internet Institute, University of Oxford
    email: matti.vuorre@oii.ox.ac.uk
    role:
      - Design
      - Administration
      - Analysis
      - Visualization
      - Writing
  - name: Andrew K. Przybylski
    affiliation: 1
    corresponding: yes
    address: Oxford Internet Institute, University of Oxford
    email: andy.przybylski@oii.ox.ac.uk
    role:
      - Design
      - Administration
      - Funding
      - Resources
      - Supervision
      - Visualization
      - Writing

affiliation:
  - id: 1
    institution: Oxford Internet Institute, University of Oxford

authornote: |
  \noindent \textbf{This manuscript is not yet peer-reviewed.}
  
  This research was supported by the Huo Family Foundation and Economic and Social Research Council Grant ES/T008709/1. 
  
  The analytic code is available at (LINK). This manuscript is available under [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/) at (LINK). Researchers can contact Facebook (ccobb@fb.com) to access our code, the Facebook data, and a synthetic version of the Gallup data for reproducing and extending our analyses.
  This study and methodology was reviewed and approved by the Oxford Internet Institute's Departmental Research Ethics Committee (SSH_OII_CIA_21_084). The authors declare no conflicts of interest.

abstract: | 
  \textbf{Abstract} Although social media's potential effects on well-being have received considerable research interest, much of past work is hampered by an exclusive focus on demographics in the Global North and the use of inaccurate self-reports. We describe associations linking 72 countries' Facebook adoption to the well-being of 946,798 individuals from 2008 to 2019. We found no associations suggesting that the global penetration of social media has caused widespread psychological harm: Facebook adoption predicted life satisfaction and positive experiences positively, and negative experiences negatively, both between countries and within countries but over time. Facebook adoption was more positively associated with well-being for younger individuals, but country-specific results were mixed. In order to move beyond studying aggregates and to better understand social media's causal effects, we need more transparent collaborative research between independent scientists and the technology industry.
  
  \textbf{Significance statement} Billions of individuals across the globe use social media on a regular basis. The widespread adoption of social media---most prominently Facebook---has fundamentally shifted how humans conduct their lives. Consequently, researchers, healthcare professionals, and policy makers have repeatedly raised alarms that the spread of social media may be negatively affecting individuals, particularly young ones, mental health and well-being on a global scale. We examined the plausibility of this idea by associating 72 nations' yearly Facebook adoption rates to the well-being of 946,798 individuals from 2008 to 2019. Overall, we found that increased rates of daily and monthly active Facebook users predicted greater levels of well-being, when comparing countries to other countries, or countries to themselves but over time. These findings should guide debate surrounding social media towards more empirical foundations: The importance of this topic requires that independent scientists gain access to more detailed data from the technology industry in order to better determine how and why modern online platforms might be affecting their users.
  
keywords: well-being, social media
# wordcount: 
bibliography: "references.bib"
floatsintext: yes
linenumbers: no
draft: no
mask: no
figurelist: no
tablelist: no
footnotelist: no
header-includes:
  - |
    \setlength{\parskip}{2pt}
    \setlength\parindent{24pt}

csl: "`r system.file('rmd', 'apa7.csl', package = 'papaja')`"
documentclass: apa7
classoption: jou
output: 
  papaja::apa6_pdf:
    number_sections: false
    keep_tex: false
  papaja::apa6_docx: 
    number_sections: false
always_allow_html: true
---

```{r setup, include = FALSE}
# Packages
library(papaja)
library(scales)
library(knitr)
library(patchwork)
library(ggh4x)
library(brms)
library(ggstance)
library(bayestestR)
library(tidyverse)

# Directories for files
dir.create("models", FALSE)

# Document options
opts_chunk$set(
  eval = TRUE,
  cache = TRUE,
  include = FALSE,
  warning = FALSE,
  dpi = 300,
  fig.align = "center"
)

# For tables: Show NAs as blanks
options(knitr.kable.NA = '')

# Plotting options
theme_set(
  theme_linedraw(
    base_size = 8
  ) +
    theme(
      panel.grid = element_blank(),
      strip.text = element_text(margin = margin(4, 4, 4, 4, "pt")),
      axis.text = element_text(size = rel(0.7)),
      axis.ticks = element_line(size = rel(0.4))
    )
)
```

```{r data-prepare}
# Load and merge data
# Facebook -- this data only exists on FORT
d_fb <- read_csv("data/fb.csv")
# If you are not conducting these analyses on FORT, the above data is not 
# available. Uncomment below to use a synthetic dataset instead.
# d_fb <- read_csv("data/fb-SYNTHETIC.csv")  # If real FB data not available

# Gallup
d_gwp <- read_rds("data/gwp.rds") 
# d_gwp <- read_rds("data/gwp-SYNTHETIC.rds") # If real Gallup data not available

# Population estimates
d_pop <- read_rds("data/population.rds")

# Convert fb metrics into country-year proportions
d_fb <- d_fb %>% 
  left_join(d_pop) %>% 
  mutate(
    dau = dau / pop,
    mau = mau / pop
  ) %>% 
  select(-pop)

# Merge
d <- left_join(d_gwp, d_fb) %>% 
  mutate(age = factor(age, levels = c("13-34", "35+")))
```

```{r models}
# Set global contrasts
options(contrasts = c(unordered = "contr.sum", ordered = "contr.poly"))

# Prepare data
dm <- d %>% 
  # Centering predictors
  # Grand mean centering so both components are zero-centered
  mutate(across(c(dau, mau), ~. - mean(., na.rm = TRUE))) %>% 
  group_by(country) %>%
  mutate(
    # Between
    dau_cb = mean(dau, na.rm = TRUE),
    mau_cb = mean(mau, na.rm = TRUE),
    # Within
    dau_cw = dau - dau_cb, 
    mau_cw = mau - mau_cb
  ) %>% 
  ungroup() %>% 
  # Center year so that intercepts are at 2014
  mutate(year = year - 2014) %>% 
  # Remove rows where predictor existed but outcome didn't
  drop_na(val)

# Model formula
model_dau <- bf(
  val | se(se, sigma = TRUE) ~
    (year + dau_cw) * age * sex + dau_cb +
    ((year + dau_cw) * age * sex | country),
  family = gaussian()
)
model_mau <- bf(
  val | se(se, sigma = TRUE) ~
    (year + mau_cw) * age * sex + mau_cb +
    ((year + mau_cw) * age * sex | country),
  family = gaussian()
)
fits <- dm %>% 
  select(outcome, year, country, sex, age, contains("_c"), val, se) %>% 
  group_by(outcome) %>% 
  nest() %>% 
  crossing(
    nesting(
      model = list(model_dau, model_mau),
      predictor = c("dau", "mau")
    )
  ) %>% 
  mutate(
    fit = pmap(
      list(model, data, outcome, predictor),
      ~brm(
        ..1,
        cores = 4, chains = 4,
        backend = "rstan",
        control = list(adapt_delta = .95),
        iter = 3000,
        data = ..2,
        file = str_glue("models/brm-{..3}-{..4}")
      )
    )
  )
```

```{r coefficients-calculate}
path <- "models/coefficients.rds"
if (!file.exists(path)) {
  # Calculate contrasts for each outcome
  h_dau <- c(
    "Average" = "dau_cw = 0",
    "13-34_Female" = 
      "dau_cw + dau_cw:age1 * -1 + dau_cw:sex1 * -1 + dau_cw:age1:sex1 * 1 = 0",
    "13-34_Male" = 
      "dau_cw + dau_cw:age1 * -1 + dau_cw:sex1 * 1 + dau_cw:age1:sex1 * -1 = 0",
    "35+_Female" = 
      "dau_cw + dau_cw:age1 * 1 + dau_cw:sex1 * -1 + dau_cw:age1:sex1 * -1 = 0",
    "35+_Male" = 
      "dau_cw + dau_cw:age1 * 1 + dau_cw:sex1 * 1 + dau_cw:age1:sex1 * 1 = 0",
    "13-34" = "dau_cw + dau_cw:age1 * -1 = 0",
    "35+" = "dau_cw + dau_cw:age1 * 1 = 0",
    "Female" = "dau_cw + dau_cw:sex1 * -1 = 0",
    "Male" = "dau_cw + dau_cw:sex1 * 1 = 0",
    "Between-country" = "dau_cb = 0",
    "X by age" = "dau_cw:age1 = 0",
    "X by sex" = "dau_cw:sex1 = 0",
    "X by age by sex" = "dau_cw:age1:sex1 = 0"
  )
  h_mau <- c(
    "Average" = "mau_cw = 0",
    "13-34_Female" = 
      "mau_cw + mau_cw:age1 * -1 + mau_cw:sex1 * -1 + mau_cw:age1:sex1 * 1 = 0",
    "13-34_Male" = 
      "mau_cw + mau_cw:age1 * -1 + mau_cw:sex1 * 1 + mau_cw:age1:sex1 * -1 = 0",
    "35+_Female" = 
      "mau_cw + mau_cw:age1 * 1 + mau_cw:sex1 * -1 + mau_cw:age1:sex1 * -1 = 0",
    "35+_Male" = 
      "mau_cw + mau_cw:age1 * 1 + mau_cw:sex1 * 1 + mau_cw:age1:sex1 * 1 = 0",
    "13-34" = "mau_cw + mau_cw:age1 * -1 = 0",
    "35+" = "mau_cw + mau_cw:age1 * 1 = 0",
    "Female" = "mau_cw + mau_cw:sex1 * -1 = 0",
    "Male" = "mau_cw + mau_cw:sex1 * 1 = 0",
    "Between-country" = "mau_cb = 0",
    "X by age" = "mau_cw:age1 = 0",
    "X by sex" = "mau_cw:sex1 = 0",
    "X by age by sex" = "mau_cw:age1:sex1 = 0"
  )
  coefs <- fits %>% 
    select(-data, -model) %>% 
    mutate(h = if_else(predictor == "dau", list(h_dau), list(h_mau))) %>% 
    mutate(
      world = map2(
        fit, h,
        ~hypothesis(.x, .y) %>% 
          .[["hypothesis"]] %>%
          tibble()
      ),
      country = map2(
        fit, h,
        ~hypothesis(.x, .y, scope = "coef", group = "country") %>%
          .[["hypothesis"]] %>%
          tibble()
      )
    ) %>% 
    select(-fit, -h)
  
  # Both predictor and outcome are 0-1, so scale can be interpreted as % change as a function of % change
  
  coefs <- coefs %>% 
    pivot_longer(c(world, country)) %>% 
    unnest(value) %>% 
    mutate(
      country = if_else(name == "country", as.character(Group), "World")
    ) %>% 
    # Between country contrast not country-specific!
    filter(!(Hypothesis == "Between-country" & country != "World")) %>% 
    # Neatly formatted result string
    mutate(
      across(c(Estimate, CI.Lower, CI.Upper), list("str" = ~number(., .01))),
      result = str_glue("{Estimate_str}% [{CI.Lower_str}, {CI.Upper_str}]")
    )
  
  saveRDS(coefs, path)
  
} else {coefs <- readRDS(path)}
```

The ways in which people use technology for most domains in life has changed dramatically since the mass introduction of the internet in the 1990s, and the subsequent technologies facilitated by it. Most prominently, the popularization of modern social media platforms in 2008 precipitated widespread changes to human activities via features such as marketplaces, personalized news feeds, photo sharing, live streaming, and other features that the "metaverse" promises to build on. The first social media with global adoption, MySpace (launched 2003) saw 115 million users in 2008---the year in which it was replaced as the leading platform by Facebook (2004). Today (2022-Q1), Facebook reports 2.94 billion monthly active users [@metaMetaReportsFirst2022], or about one third of the global population. Along with social media's global penetration, debate surrounding their potential effects on individual and collective well-being has intensified.

Although reports of negative psychological outcomes associated social media are common in academic writing [@krossFacebookUsePredicts2013] and popular media [@thompsonSocialMediaAttention2021], evidence for harms is, on balance, more speculative than conclusive [@bestOnlineCommunicationSocial2014; @dickson2018screen; @odgersAnnualResearchReview2020; @ophirNewMediaScreenTime2020]. Recent results on the associations between social media use and well-being are mixed and shown to critically depend on arbitrary analytic choices [@orbenSocialMediaEnduring2019]. Other studies have reported that there have been few if any changes in associations linking technology use to mental health in this period of social media's global adoption [@vuorreThereNoEvidence2021]. A general lack of validated measures, poorly specified causal models, and inadequate data have yielded a large number of low quality studies [@parrySystematicReviewMetaanalysis2021; @sewallDoesObjectivelyMeasured2022]. Furthermore, because nearly all investigations have focused on samples from the Global North [@ghaiSocialMediaAdolescent2022], we have next to no idea of how the wide adoption of social media platforms relates to psychological well-being across the world.

To better understand the plausible range of associations, we linked data tracking Facebook's global adoption with three indicators of global well-being. We examined 72 countries' per capita daily active Facebook users (DAU) in two age brackets (13-34 and 35+ years) as predictors of life satisfaction (LS), negative (NE), and positive psychological experiences (PE) at the level of years spanning 2008 to 2019. The well-being data represented 946,798 individuals' responses from the nationally representative Gallup World Poll Survey [@gallupHowDoesGallup2014]. We joined these unique datasets to conduct a descriptive study to answer three basic yet important questions: First, to what extent did Facebook adoption predict well-being? Second, do these associations differ by age or sex. And finally, to what extent might these associations have differed between countries?

```{r tab-world}
#| include: true

# Average within- and between-country associations
tab_world <- coefs %>% 
  filter(
    name == "world",
    Hypothesis %in% c("Average", "Between-country")
  ) %>% 
  mutate(
    outcome = case_when(
      outcome == "Life_satisfaction" ~ "LS",
      outcome == "Negative_experiences" ~ "NE",
      outcome == "Positive_experiences" ~ "PE"
    )
  ) %>% 
  select(
    predictor, Outcome = outcome, Hypothesis, result
  ) %>% 
  pivot_wider(names_from = Hypothesis, values_from = result) %>% 
  rename(
    `Within country` = Average,
    `Between country` = `Between-country`
  ) %>% 
  select(predictor, Outcome, `Between country`, `Within country`) %>% 
  arrange(predictor, Outcome)

tab_world %>% 
  filter(predictor == "dau") %>% 
  select(-predictor) %>% 
  mutate(
    across(
      ends_with("country"), 
      ~if_else(str_starts(., "-"), ., paste0("\\phantom{-}", .))
    )
  ) %>% 
  apa_table(
    caption = "Average Facebook DAU and well-being associations",
    font_size = "small",
    note = "LS: Life satisfaction, NE: Negative experiences: PE: Positive experiences. Numbers indicate posterior means and 95\\%CIs.",
    span_text_columns = FALSE,
    escape = FALSE,
    placement = "htb",
    align = 'llll'
  )
```

```{r}
# How many people in GWP data
d_gwp %>% 
  group_by(outcome) %>% 
  summarise(n = sum(n)) %>% 
  pull(n) %>% max %>% number

# Percentages of countries where DAU was over 25% by year
tmp <- d_fb %>% 
  group_by(year, age) %>% 
  summarise(median_dau = percent(median(dau))) %>% 
  pivot_wider(names_from = age, values_from = median_dau)
tmp
```

```{r fig-data}
#| include: true
#| out.width: "\\textwidth"
#| fig.env: "figure*"
#| fig.height: 5
#| fig.cap: "A. 72 countries' daily active Facebook users in two age brackets from 2008 to 2019. (Percentages may exceed 100\\% due to inaccurate estimation of either DAU or population size.) B. The same 72 countries' mean responses to three well-being scales in the Gallup World Poll from 2008 to 2019, separated by age category and sex. LS: Life satisfaction, NE: Negative experiences: PE: Positive experiences."

# Figure of all variables over time
p_a <- d_fb %>% 
  ggplot(aes(year, dau, group = country)) +
  scale_y_continuous(
    "Percentage of population", 
    expand = expansion(.03),
    breaks = extended_breaks(),
    labels = ~percent(.)
  ) +
  scale_x_continuous(
    "Year", 
    breaks = seq(2008, 2018, by = 2), 
    labels = ~str_replace(., "20", "'"),
    expand = expansion(0.01)
  ) +
  geom_line(size = .125) +
  # geom_smooth(group = 1, method = "gam", se = F) +
  facet_wrap("age", nrow = 1) +
  theme(
    legend.position = "none",
    axis.title.x = element_blank()
  )

p_b <- d %>% 
  # Exclude rows where FB data existed but not GWP data
  drop_na(val) %>% 
  # Actual lowest age in GWP
  mutate(age = factor(age, labels = c("15-34", "35+"))) %>% 
  mutate(
    outcome = case_when(
      outcome == "Life_satisfaction" ~ "LSAT",
      outcome == "Negative_experiences" ~ "NPE",
      outcome == "Positive_experiences" ~ "PPE"
    )
  ) %>% 
  mutate(panel = str_glue("{age} ({sex})")) %>% 
  ggplot(aes(year, val, group = country)) +
  scale_color_brewer(palette = "Dark2") +
  scale_y_continuous(
    "Value", 
    expand = expansion(.01),
    breaks = extended_breaks(),
    labels = ~percent(.)
  ) +
  scale_x_continuous(
    "Year", 
    breaks = seq(2008, 2018, by = 2),
    labels = ~str_replace(., "20", "'")
  ) +
  geom_line(size = .125) +
  facet_grid(
    outcome~panel, 
    scales = "free_y",
    labeller = as_labeller(~str_replace(., "_", " "))
  ) +
  theme(legend.position = "none")


(p_a / p_b) +
  plot_layout(heights = c(3, 7)) +
  plot_annotation(tag_levels = "A")
```

Facebook adoption increased markedly from 2008 when the median per capita DAU across these 72 countries was `r tmp[1,2]` (ages 13-34) and `r tmp[1,3]`% (35+), to `r tmp[12,2]` (13-34) and `r tmp[12,3]` (35+; Figure \@ref(fig:fig-data)A) in 2019. During this period Facebook adoption by younger individuals plateaued before saturation in many countries, but not for older individuals. At the same time, we did not observe correspondingly large and uniform changes across measures of well-being (Figure \@ref(fig:fig-data)B) [@vuorreGlobalWellbeingMental2022].

To answer our first question of how Facebook adoption might relate to well-being, we specified a Bayesian multilevel linear meta-regression model of each well-being outcome on time, sex, age, and DAU (both within- and between-country-centered, see SI). We included all interactions between sex, age, and time, and sex, age, and DAU (within-country-centered), and allowed all parameters to vary randomly across countries. We first examined whether the relative standing of countries on their average Facebook adoption predicted well-being (the model's between-country associations). We found that countries with greater average DAU had somewhat higher levels of life satisfaction and positive experiences, and lower levels of negative experiences than countries with lower DAU (Table \@ref(tab:tab-world)). However, there are large and important differences between countries in factors that might underlie differences in both social media adoption and well-being, such as socioeconomic conditions. As such, while descriptively informative, these associations are likely to indicate between-country confounding factors.

```{r fig-forest}
#| include: true
#| out.width: "\\textwidth"
#| fig.env: "figure*"
#| fig.height: 4.6
#| fig.cap: "Forest plot of estimated associations between country-year level per-capita daily active Facebook users (DAU) and life satisfaction (LS), negative experiences (NE), and positive experiences (PE). Units indicate percentage change in outcome as function of percentage increase in within-country centered DAU. Filled points indicate estimates whose posterior 95\\%CI excluded zero. See the online supplementary materials for corresponding figure but with MAU as predictor."

tmp <- coefs %>%   
  filter(
    # name != "world",
    str_detect(Hypothesis, "_")
  ) %>% 
  separate(Hypothesis, c("Age", "Sex"), sep = "_") %>% 
  mutate(
    outcome = case_when(
      outcome == "Life_satisfaction" ~ "LS",
      outcome == "Negative_experiences" ~ "NE",
      outcome == "Positive_experiences" ~ "PE"
    )
  ) %>% 
  # mutate(outcome = str_glue("{outcome} ({Sex})")) %>% 
  filter(predictor == "dau")

tmp %>%
  ggplot() +
  aes(
    x = Estimate, 
    y = fct_rev(country), 
    col = Age, 
    fill = interaction(Age, Star, sep = " "), 
    shape = Sex
  ) +
  scale_y_discrete(
    "Country",
    expand = expansion(.015),
    labels = ~str_replace(., "World", "Average")
  ) +
  scale_x_continuous(
    "Association with daily active Facebook users (95%CI)",
    breaks = extended_breaks(7),
    expand = expansion(.1)
  ) +
  scale_shape_manual(
    values = c(21, 22)
  ) +
  scale_color_brewer(
    "Age", palette = "Set1", aesthetics = c("color")
  ) +
  scale_fill_manual(values = c("white", "white", "#E41A1C", "#377EB8")) +
  geom_vline(xintercept = 0, lty = 2, size = .25, col = "grey50") +
  geom_linerangeh(
    aes(xmin = CI.Lower, xmax = CI.Upper),
    size = .15, position = position_dodge2v(.7), 
    show.legend = FALSE
  ) +
  geom_point(
    size = .65, stroke = .45,
    position = position_dodge2v(.7)
  ) +
  facet_wrap(
    "outcome", scales = "free_x", nrow = 1,
    labeller = as_labeller(~str_replace(., "_", " "))
  ) +
  guides(
    fill = "none",
    color = guide_legend(override.aes = list(size = 1.5)),
    shape = guide_legend(override.aes = list(size = 1.5))
  ) +
  theme(
    axis.text.y = element_text(size = rel(0.7)),
    axis.title.y = element_blank(),
    panel.grid.major.y = element_line(
      size = .1, linetype = 2, color = "gray60"
    ),
    legend.position = "right"
  )
```

Variations in such confounding factors are likely to be significantly smaller within countries over time. We therefore next focused on the model's within-country associations, which measure the extent to which Facebook adoption in a given country predicted well-being in that country adjusting for general linear temporal trends in the well-being outcome. On average across countries, age, and sex, we found that years with greater than the average country's average DAU were associated with greater levels of life satisfaction and positive experiences, and lower levels of negative experiences (Table \@ref(tab:tab-world)). For the average country in our sample of 72, Facebook adoption positively predicted well-being. While these associations indicate relations within countries and adjust for confounders that vary linearly with time, by including time as a predictor, they are still susceptible to confounders and do not indicate causal relations. Rather, this association describes the fact that, all else being equal, years with greater Facebook adoption tended to be those with greater levels of well-being.

```{r demographics}
coefs %>% 
  filter(
    str_detect(Hypothesis, " by "), 
    name == "world"
  ) %>% 
  select(
    Predictor = predictor, Outcome = outcome, Hypothesis, result
  ) %>% 
  pivot_wider(names_from = Outcome, values_from = result)
coefs %>% 
  filter(
    Hypothesis %in% c("13-34", "35+", "Female", "Male"),
    name == "world"
  ) %>% 
  select(
    Predictor = predictor, Outcome = outcome, Hypothesis, result
  ) %>% 
  pivot_wider(names_from = Outcome, values_from = result)

tab_demo <- coefs %>% 
  filter(
    str_detect(Hypothesis, "_"),
    name == "world"
  ) %>% 
  select(
    Predictor = predictor, Outcome = outcome, Hypothesis, result
  ) %>% 
  pivot_wider(names_from = Outcome, values_from = result)
tab_demo
```

We then turned to our second question and assessed whether within-country associations linking Facebook adoption to well-being differed between the demographic groups. Differences in the association linking Facebook adoption and well-being were greater between the younger and older demographics than they were between females and males (Figure \@ref(fig:fig-forest), Average). DAU predicted life satisfaction more positively in the younger age bracket, but these estimates' CIs did not exclude zero. DAU predicted negative experiences negatively in the younger age group, but positively for older males. These differences were less pronounced for positive experiences, which were positively associated with DAU only in the 13-34 year old male group. These results show that Facebook adoption was, for the average nation in our sample, more positively predictive of well-being for individuals below 35, and that differences between males and females were generally smaller than those between age groups.

```{r}
# Can we show regions in the forest plot as secondary axis? 
# Table of percentages of countries with credible associations
tmp <- coefs %>% 
  filter(name == "country", Hypothesis == "Average") %>% 
  group_by(predictor, outcome, Star, direction=sign(Estimate)) %>% 
  count() %>% 
  group_by(predictor, outcome) %>% 
  # mutate(n = percent(n / sum(n), 1)) %>% 
  mutate(x = interaction(Star, direction)) %>% 
  select(-Star, -direction) %>% 
  pivot_wider(names_from=x, values_from=n) %>% 
  replace_na(list(`.-1` = 0, `.1` = 0, `*.1` = 0, `*.-1` = 0))
tmp
coefs %>% 
  filter(predictor == "dau", name == "country", Hypothesis == "Average") %>% 
  filter(Star=="*") %>% 
  arrange(outcome, country) %>% 
  select(outcome, country, Estimate:CI.Upper)
```

However, while informative aggregates, these results do not describe associations between Facebook adoption and well-being for any individual country, but rather their averages. To answer our third question, we computed country-specific estimates for each sex and age group (Figure \@ref(fig:fig-forest)). On average, for life satisfaction, `r tmp[1, 5]` countries credibly positive associations. For negative experiences, `r tmp[2, 6]` countries had a credibly negative association, and `r tmp[3, 5]` countries had a credibly positive association between DAU and positive experiences. There were no credible (at the 95% level) country-level negative associations between DAU and life-satisfaction. Although many country-level estimates were uncertain, these results aligned with the general pattern of positive associations between Facebook adoption and country-level well-being.

```{r fig-ce-prepare}
#| eval: false
# Create a predictor table with evenly spaced mau_cw values for each country
newx_country <- fits$data[[1]] %>% 
  group_by(country, age, sex, mau_cb) %>% 
  filter(mau_cw %in% c(min(mau_cw), max(mau_cw))) %>% 
  select(country, age, sex, mau_cb, mau_cw) %>% 
  # For above groupings, create a sequence of dau_cws from min to max
  group_modify(
    ~tibble(mau_cw = seq(min(.$mau_cw), max(.$mau_cw), length = 31))
  ) %>% 
  ungroup() %>% 
  mutate(year = 0, se = 0)

newx_world <- fits$data[[1]] %>% 
  group_by(age, sex) %>% 
  filter(mau_cw %in% c(min(mau_cw), max(mau_cw))) %>% 
  select(age, sex, mau_cw) %>% 
  # For above groupings, create a sequence of mau_cws from min to max
  group_modify(
    ~tibble(mau_cw = seq(min(.$mau_cw), max(.$mau_cw), length = 31))
  ) %>% 
  ungroup() %>% 
  mutate(mau_cb = 0, year = 0, se = 0)

newy <- fits %>% 
  mutate(
    country = map(
      mau, 
      ~bind_cols(newx_country, fitted(.x, newx_country))
    ),
    world = map(
      mau, 
      ~bind_cols(newx_world, fitted(.x, newx_world, re_formula = NA))
    )
  ) %>% 
  select(outcome, country, world)
```

```{r fig-ce}
#| eval: false
#| include: true

newy %>% 
  pivot_longer(c(country, world)) %>% 
  unnest(value) %>% 
  ungroup() %>% 
  mutate(country = if_else(name == "world", "World", country)) %>% 
  ggplot(
    aes(mau_cw, Estimate, group = interaction(country, sex), col = sex, fill = sex)
  ) +
  scale_color_brewer(
    "Age", 
    palette = "Dark2", 
    aesthetics = c("color", "fill")
  ) +
  scale_y_continuous(
    "Estimated outcome",
    breaks = extended_breaks()
  ) +
  scale_x_continuous(
    "Country-mean deviated monthly FB users",
    breaks = extended_breaks(),
    labels = ~percent(.)
  ) +
  scale_size_manual(values = c(.2, .4)) +
  geom_ribbon(
    data = . %>% filter(name == "world"),
    aes(ymin = Q2.5, ymax = Q97.5),
    alpha = .2, col = NA
  ) +
  geom_line(aes(size = name)) +
  facet_grid(
    age~outcome, scales = "free_y",
    labeller = as_labeller(~str_replace(., "_", " "))
  ) +
  theme(legend.position = "none")
```

We found that, on the whole, Facebook adoption positively predicted well-being. This association held when comparing countries to other countries, and individual countries over time. While these descriptive results do not speak to causal effects, they align with other recent findings suggesting that technology has not become increasingly harmful over time [@vuorreThereNoEvidence2021], and that increased adoption of general internet technologies are not, overall, associated with psychological harms [@vuorreGlobalWellbeingMental2022]. That said, these conclusions are qualified because our focus on daily active users could miss those who use Facebook less regularly. To test this idea, we also conducted our analyses using monthly active Facebook users (MAU) as the predictor. Those results were substantively the same (see online supplement).

It is widely accepted that social media and the Internet more broadly have changed how humans socialize, organize, and seek leisure, but it is not obvious or necessary that their wide adoption has influenced well-being. In this study we used the best data available to describe how global Facebook adoption relates to well-being across 72 countries over a 12-year period. We found generally positive associations between Facebook adoption and well-being which were partially qualified by demographics and not uniform across countries. 

We did not find evidence that increased social media adoption is consistently negatively associated with well-being. Nevertheless, our analyses cannot and do not rule out that possibility because more fine-grained data needed to do so either do not exist or are not available. If we are to move past description to prediction or intervention, independent scientists and online platforms will need to collaborate in new, transparent ways. As it stands now, only a handful of scientists working in the technology industry have the data needed to advance this line of inquiry. If we are to understand and improve well-being in the digital age, this must change.

# References

::: {#refs}
:::

# Supporting information

## Data availability

Both datasets (Facebook and Gallup) are proprietary and we therefore could not share them with this manuscript.  The analytic code, along with synthetic datasets, is available at (LINK). Researchers can contact Facebook (ccobb@fb.com) to access our code, the Facebook data, and a synthetic version of the Gallup data for reproducing and extending our analyses. The Gallup data are available online to subscribing institutions.

## Facebook data

```{r}
# Text list of countries
countries <- sort(unique(d_fb$country))
countries[length(countries)] <- paste("and", countries[length(countries)])
countries <- str_c(countries, collapse = ", ")
```

We studied two metrics of Facebook adoption, daily (DAU) and monthly active users (MAU), from 2008 to 2019 for 72 countries (see Figure \@ref(fig:fig-forest)). FB estimates yearly DAU & MAU with their corresponding means from June 1 to August 31, and rounds values greater than 10,000,000 to three significant digits, and values less than 10,000,000 to the nearest 10,000. We report analyses based on DAU in the main manuscript, and MAU in the online supplement. DAU and MAU estimates are calculated separately for individuals aged 13-34 and 35+. User age is determined based on Facebook profile information, which can be inaccurate (e.g. young individuals report an older age.) Accordingly, 0.008% of total MAU were trimmed to exclude accounts with unrealistic on non-reported age. 

In personal communication, Facebook representatives explained the selection of countries as "The countries provided were selected based upon geographic and cultural diversity and criteria related to data quality, including that geographic and age attribution error is believed to be relatively small." A given user's country is determined based on a number of factors, including the user's IP address and self-reported location.

Facebook defines users as individuals who visited Facebook or used Messenger during the appropriate period. Although accurately captured, these numbers are not perfect indicators of actual user numbers because of possible duplicate and false accounts. FB estimates those accounts to count for 11% and 5% of global MAUs, and that the former may be more likely in developing regions. Because internal criteria and methodology for determining duplicate and false accounts can change over time, estimates of MAU and DAU can also change.

The Facebook adoption data were made available to us on Facebook's Open Research Tool platform. Other researchers can contact Facebook (ccobb@fb.com) to access the dataset.

## Well-being

```{r}
# N is max N over different outcomes
gwp_n <- d_gwp %>% 
  group_by(outcome) %>% 
  summarise(n = sum(n)) %>% 
  pull(n) %>% 
  max()

# N groups same logic
gwp_n_groups <- count(d_gwp, outcome) %>% 
  pull(n) %>% 
  max()
```

Gallup World Poll (GWP) is a nationally representative annual survey of 1,000 civilian, non-institutionalised individuals aged 15 years or older from 164 countries conducted since 2005. The surveys are conducted face-to-face or on the phone in the respondents’ native language and by local interviewers (for details, see [@gallupHowDoesGallup2014]). We studied Positive (PE) and Negative Experiences (NE), and life satisfaction. PE and NE measure respondents’ experienced well-being on the day before the survey with five items each. For PE, these items are: "Did you feel well-rested yesterday?", "Were you treated with respect all day yesterday?", "Did you smile or laugh a lot yesterday?", "Did you learn or do something interesting yesterday?, and "(Did you experience the following feelings during a lot of the day yesterday?) How about enjoyment?".

The NE items are responses to "Did you experience the following feelings during a lot of the day yesterday?" for physical pain, worry, sadness, stress, and anger? For analyses we used the means of these scales. Life satisfaction in the moment was measured with one 11-step Likert item, "Please imagine a ladder, with steps numbered from 0 at the bottom to 10 at the top. The top of the ladder represents the best possible life for you and the bottom of the ladder represents the worst possible life for you. On which step of the ladder would you say you personally feel you stand at this time?". For analyses, we scaled these variables to percentages, and aggregated the `r number(gwp_n, big.mark = ",")` individuals’ data to means and standard errors for each country, year, sex, and age (15-34 and 35+) combination (`r number(gwp_n_groups, big.mark = ",")` cells).

## Data analysis

Before analysing the data, we converted Facebook DAU and MAU to proportions of each country's and age group's yearly population sizes using population data from the United Nations Department of Economic and Social affairs (<https://population.un.org/wpp/Download/Standard/Population/>).

We examined the association between Facebook adoption and well-being through bayesian hierarchical regression models, estimated separately for DAU and MAU, and each of the three well-being outcomes. We regressed the outcome $y$ on time (decades, centered on 2014), within-country centered $x$ (DAU / MAU), age, sex, all the interactions except time by $x$, and the between-country centered DAU. We allowed all coefficients to vary randomly across the 72 countries, except the between-country predictor. Because we aggregated the outcomes, we included to standard errors of the outcome in the model to account for the varying group sizes. Formally, we specified the model as

$$
\begin{aligned} 
y_i &\sim \text{Normal}(\mu_i, \sigma^{y2}v_i) \\
\mu_i &= \alpha_{0} + \beta_{0\text{country}[i]} + \\
&\quad\ (\alpha_{1} + \beta_{1\text{country}[i]})\text{Sex}_i + \\
&\quad\ (\alpha_{2} + \beta_{2\text{country}[i]})\text{Age}_i + \\
&\quad\ (\alpha_{3} + \beta_{3\text{country}[i]})\text{Time}_i + \\
&\quad\ (\alpha_{4} + \beta_{4\text{country}[i]})\text{DAU}^{\text{CW}}_i + \\
&\quad\ (\alpha_{5} + \beta_{5\text{country}[i]})\text{Sex}_i \times \text{Time}_i + \\
&\quad\ (\alpha_{6} + \beta_{6\text{country}[i]})\text{Age}_i \times \text{Time}_i + \\
&\quad\ (\alpha_{7} + \beta_{7\text{country}[i]})\text{Sex}_i \times \text{Age}_i + \\
&\quad\ (\alpha_{8} + \beta_{8\text{country}[i]})\text{Sex}_i \times \text{Age}_i \times \text{Time}_i + \\
&\quad\ (\alpha_{9} + \beta_{9\text{country}[i]})\text{Sex}_i \times \text{DAU}^{\text{CW}}_i + \\
&\quad\ (\alpha_{10} + \beta_{10\text{country}[i]})\text{Age}_i \times \text{DAU}^{\text{CW}}_i + \\
&\quad\ (\alpha_{11} + \beta_{11\text{country}[i]})\text{Sex}_i \times \text{Age}_i \times \text{DAU}^{\text{CW}}_i + \\
&\quad\ \alpha_{12} \text{DAU}^{\text{CB}}_i
\\
\pmb{\beta} &\sim \text{MVN}(\pmb{0}, \Sigma)
\end{aligned}
$$

Where $y_i$ is the outcome (e.g. life satisfaction) on row $i$, $v_i$ its sampling variance, $\alpha$ are the population-level coefficients, $\beta_{0, \dots, 11\text{country}[i]}$ are the country-specific coefficients for the country indicated on row $i$, $\text{DAU}^{\text{CW}}_i$ the within-country centered year-aggregated daily (or monthly) active Facebook users, and $\text{DAU}^{\text{CB}}_i$ the between-country centered DAU (or MAU).

We conducted all data analyses with the R language for statistical computing [@rcoreteamLanguageEnvironmentStatistical2021] and estimated the models using Stan’s Hamiltonian Monte Carlo sampling via the brms R package [@burknerBrmsPackageBayesian2017]. We used default noninformative priors, 4 HMC chains with 4,000 iterations and first 2,000 as warmup for 8,000 total iterations; we report all parameters with their posterior means and 95% credible intervals (posterior 2.5 and 97.5 percentiles; CI), and other posterior probabilities as indicated in text.

\newpage

# Online supplement to The association between Facebook adoption and well-being (Vuorre and Przybylski): Monthly active users

<!-- Prepend table & figure numbers with S and reset counters -->
\setcounter{page}{1}
\setcounter{table}{0}
\setcounter{figure}{0}
\renewcommand{\thetable}{S\arabic{table}}
\renewcommand{\thefigure}{S\arabic{figure}}

In the main document, we analysed associations between well-being and daily active Facebook users (DAU). Here, we repeat those analyses but use monthly active users (MAU) as the predictor

```{r fig-data-mau}
#| include: true
#| out.width: "\\textwidth"
#| fig.env: "figure*"
#| fig.height: 2.3
#| fig.cap: "72 countries' monthly active Facebook users in two age brackets from 2008 to 2019. (Percentages may exceed 100\\% due to inaccurate estimation of either DAU or population size.) "
p_a + aes(y = mau)
```

Figure \@ref(fig:fig-data-mau) shows that the trends of Facebook adoption observed for DAU for mostly similar for MAU, but the overall rates were somewhat greater. We estimated the same model as in the main analyses; the key association parameters are shown in Table \@ref(tab:tab-world-mau). Overall, the results were qualitatively similar, but the associations with MAU tended to be smaller. In addition the within-country associations between life satisfaction and negative experiences and MAU were no longer credible at the 95% level.

```{r tab-world-mau}
#| include: true
tab_world %>% 
  filter(predictor == "mau") %>% 
  select(-predictor) %>% 
  mutate(
    across(
      ends_with("country"), 
      ~if_else(str_starts(., "-"), ., paste0("\\phantom{-}", .))
    )
  ) %>% 
  apa_table(
    caption = "Average Facebook MAU and well-being associations",
    font_size = "small",
    note = "LS: Life satisfaction, NE: Negative experiences: PE: Positive experiences. Numbers indicate posterior means and 95\\%CIs.",
    span_text_columns = FALSE,
    escape = FALSE,
    placement = "htb",
    align = 'llll'
  )
```

Overall, the average results across demographics mirrored those with DAU (Figure \@ref(fig:fig-forest-mau)). However, many of the country-specific associations differed (individual countries in Figure \@ref(fig:fig-forest-mau)). In sum, these results suggest that for associations at the level of countries, the aggregate intensity of use (monthly or daily) did not play a large role.

```{r fig-forest-mau}
#| include: true
#| out.width: "\\textwidth"
#| fig.env: "figure*"
#| fig.height: 4.6
#| fig.cap: "Forest plot of estimated associations between country-year level per-capita monthly active Facebook users (MAU) and life satisfaction (LS), negative experiences (NE), and positive experiences (PE). Units indicate percentage change in outcome as function of percentage increase in within-country centered MAU. Filled points indicate estimates whose posterior 95\\%CI excluded zero."

tmp <- coefs %>%   
  filter(
    # name != "world",
    str_detect(Hypothesis, "_")
  ) %>% 
  separate(Hypothesis, c("Age", "Sex"), sep = "_") %>% 
  mutate(
    outcome = case_when(
      outcome == "Life_satisfaction" ~ "LS",
      outcome == "Negative_experiences" ~ "NE",
      outcome == "Positive_experiences" ~ "PE"
    )
  ) %>% 
  # mutate(outcome = str_glue("{outcome} ({Sex})")) %>% 
  filter(predictor == "mau")

tmp %>% 
  ggplot() +
  aes(
    x = Estimate, 
    y = fct_rev(country), 
    col = Age, 
    fill = interaction(Age, Star, sep = " "), 
    shape = Sex
  ) +
  scale_y_discrete(
    "Country",
    expand = expansion(.015),
    labels = ~str_replace(., "World", "Average")
  ) +
  scale_x_continuous(
    "Association with monthly active Facebook users (95%CI)",
    breaks = extended_breaks(7),
    expand = expansion(.1)
  ) +
  scale_shape_manual(
    values = c(21, 22)
  ) +
  scale_color_brewer(
    "Age", palette = "Set1", aesthetics = c("color")
  ) +
  scale_fill_manual(values = c("white", "white", "#E41A1C", "#377EB8")) +
  geom_vline(xintercept = 0, lty = 2, size = .25, col = "grey50") +
  geom_linerangeh(
    aes(xmin = CI.Lower, xmax = CI.Upper),
    size = .15, position = position_dodge2v(.7), 
    show.legend = FALSE
  ) +
  geom_point(
    size = .65, stroke = .45,
    position = position_dodge2v(.7)
  ) +
  facet_wrap(
    "outcome", scales = "free_x", nrow = 1,
    labeller = as_labeller(~str_replace(., "_", " "))
  ) +
  guides(
    fill = "none",
    color = guide_legend(override.aes = list(size = 1.5)),
    shape = guide_legend(override.aes = list(size = 1.5))
  ) +
  theme(
    # axis.ticks.y = element_blank(),
    axis.text.y = element_text(size = rel(0.7)),
    axis.title.y = element_blank(),
    panel.grid.major.y = element_line(
      size = .1, linetype = 2, color = "gray60"
    ),
    legend.position = "right"
  )
```
